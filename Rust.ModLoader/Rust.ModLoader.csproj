<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{A8CECB53-E09E-4E09-8287-02A9C33C34F4}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Rust.ModLoader</RootNamespace>
    <AssemblyName>Rust.ModLoader</AssemblyName>
	<TargetFramework>net4.6.2</TargetFramework>
    <FileAlignment>512</FileAlignment>
    <Deterministic>true</Deterministic>
    <TargetFrameworkProfile />
    <NuGetPackageImportStamp>
    </NuGetPackageImportStamp>
  </PropertyGroup>
	<ItemGroup>
		<Reference Include="System.Net.Http" />
		<Reference Include=".references\RustDedicated_Data\Managed\0Harmony.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Assembly-CSharp.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Assembly-CSharp-firstpass.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Facepunch.Console.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Facepunch.Network.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Facepunch.System.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Facepunch.Unity.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Facepunch.UnityEngine.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Newtonsoft.Json.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Rust.Data.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\Rust.Global.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\UnityEngine.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\UnityEngine.CoreModule.dll" />
		<Reference Include=".references\RustDedicated_Data\Managed\0Harmony.dll" />
	</ItemGroup>
	<!-- Download server dlls to the .references folder at the project level-->
	<Target Name="PreBuild" BeforeTargets="PreBuildEvent">
		<DownloadFile SourceUrl="https://github.com/SteamRE/DepotDownloader/releases/download/DepotDownloader_2.4.6/depotdownloader-2.4.6.zip" DestinationFolder="$(OutDir)/download/" DestinationFileName="depot-downloader.zip">
			<Output TaskParameter="DownloadedFile" ItemName="Content" />
		</DownloadFile>
		<Unzip SourceFiles="$(OutDir)/download/depot-downloader.zip" DestinationFolder="$(OutputPath)/depot-downloader/" OverwriteReadOnlyFiles="true" />
		<Exec Command="$(OutDir)depot-downloader\\DepotDownloader.exe -app 258550 -branch public -dir ./.references/ -filelist ./tools/depot-downloader-whitelist.txt" />
	</Target>
  <ItemGroup>
    <None Include="app.config" />
  </ItemGroup>
  <ItemGroup>
    <Analyzer Include="..\packages\Microsoft.CodeAnalysis.Analyzers.3.3.2\analyzers\dotnet\cs\Microsoft.CodeAnalysis.Analyzers.dll" />
    <Analyzer Include="..\packages\Microsoft.CodeAnalysis.Analyzers.3.3.2\analyzers\dotnet\cs\Microsoft.CodeAnalysis.CSharp.Analyzers.dll" />
  </ItemGroup>
  <ItemGroup>
    <Content Include="FodyWeavers.xml" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="Fody" Version="6.3.0">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="ILMerge.Fody" Version="1.16.0" PrivateAssets="all" />
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="3.8.0" />
  </ItemGroup>
</Project>